<div>
  <div>
    <form [formGroup]="mepGroup">
      <h5>Informations concernant la MEP</h5>
      <mat-form-field class="formField">
        <input matInput placeholder="Nom de la MEP" [formControl]="nameControl">
      </mat-form-field>
      <mat-form-field class="formField">
        <input matInput placeholder="Projet" [formControl]="projectControl" [matAutocomplete]="projectChoice">
        <mat-autocomplete #projectChoice="matAutocomplete">
          <mat-option *ngFor="let project of projects" [value]="project">
            {{project}}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>
      <mat-form-field class="formField">
        <input matInput placeholder="Version du projet" [formControl]="versionControl">
      </mat-form-field>
      <mat-form-field class="formField">
        <mat-label>Choix du template</mat-label>
        <mat-select [formControl]="templateControl">
          <mat-option *ngFor="let template of templates" [value]="template">
            {{template.name}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </form>
  </div>
  <div>
    <form [formGroup]="apiFormGroup" (ngSubmit)="apiFormSubmit()">
      <h5>Ajouter des APIs</h5>
      <mat-form-field class="formField">
        <input matInput placeholder="Nom de l'API" [formControl]="apiNameControl">
      </mat-form-field>
      <mat-form-field class="formField">
        <input matInput placeholder="Référant" [formControl]="apiMaintainerControl">
      </mat-form-field>
      <mat-form-field class="formField">
        <mat-label>Type d'API</mat-label>
        <mat-select [formControl]="apiTypeControl">
          <mat-option *ngFor="let type of apiTypes" [value]="type">
            {{type}}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field class="formField">
        <input matInput placeholder="Ancienne version" [formControl]="apiOldVersionControl">
      </mat-form-field>
      <mat-form-field class="formField">
        <input matInput placeholder="Nouvelle version" [formControl]="apiNewVersionControl">
      </mat-form-field>
      <button mat-button mat-stroked-button color="primary" type="submit">Ajouter l'API</button>
      <div>
        <h5>Liste des APIs de la MEP</h5>
        <table mat-table matSort #apiTable [dataSource]="apis" class="api-table">

          <ng-container matColumnDef="name">
            <th mat-header-cell mat-sort-header *matHeaderCellDef>Nom</th>
            <td mat-cell *matCellDef="let element"> {{element.name}} </td>
          </ng-container>

          <ng-container matColumnDef="maintainer">
            <th mat-header-cell mat-sort-header *matHeaderCellDef>Mainteneur</th>
            <td mat-cell *matCellDef="let element"> {{element.maintainer}} </td>
          </ng-container>

          <ng-container matColumnDef="type">
            <th mat-header-cell mat-sort-header *matHeaderCellDef>Type</th>
            <td mat-cell *matCellDef="let element"> {{element.type}} </td>
          </ng-container>

          <ng-container matColumnDef="newVersion">
            <th mat-header-cell mat-sort-header *matHeaderCellDef>Nouvelle version</th>
            <td mat-cell *matCellDef="let element"> {{element.newVersion}} </td>
          </ng-container>

          <ng-container matColumnDef="oldVersion">
            <th mat-header-cell mat-sort-header *matHeaderCellDef>Ancienne version</th>
            <td mat-cell *matCellDef="let element"> {{element.oldVersion}} </td>
          </ng-container>

          <ng-container matColumnDef="action">
            <th mat-header-cell mat-sort-header *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let element" class="action-column">
              <button type="button" (click)="removeApiFromList(element)" mat-flat-button color="warn">
                <mat-icon aria-hidden="false" aria-label="delete icon">delete</mat-icon>
              </button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      </div>
    </form>
  </div>
  <div>
    <button [disabled]="!canSubmit()"
            (click)="createMep()"
            type="button"
            class="stepper-button" mat-raised-button
            color="primary">
      Créer la MEP
    </button>
  </div>
</div>
